# Enable Rewrite Engine
RewriteEngine On

# Prevent direct access to certain directories
RewriteRule ^(config|database|includes|models)/ - [F,L]

# Test endpoint for mod_rewrite
RewriteRule ^test-rewrite-check$ test-rewrite.php?route=test-rewrite-check [L]

# Redirect all requests to router.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/assets/
RewriteRule ^(.*)$ router.php?route=$1 [QSA,L]

# Set default charset
AddDefaultCharset UTF-8

# Disable directory browsing
Options -Indexes

# Protect sensitive files
<FilesMatch "^\.">
    Order allow,deny
    Deny from all
</FilesMatch>

<FilesMatch "\.(env|log|sql)$">
    Order allow,deny
    Deny from all
</FilesMatch>
